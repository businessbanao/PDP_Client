<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button style="color: white"></ion-menu-button>
    </ion-buttons>
    <ion-title> Routine Manager </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="addRoutineModal()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ng-container>
    <form #form="ngForm" (ngSubmit)="handelSubmit(form)">
      <ion-item>
        <div
          style="
            display: flex;
            width: 100vw;
            justify-content: space-between;
            padding: 5px;
          "
        >
          <input
            type="date"
            style="border-radius: 5px; padding: 10px"
            name="date"
            (change)="getDailyRoutineListByDate($event.target.value)"
            [(ngModel)]="selectedDate"
          />
          <button type="submit">Save</button>
        </div>
      </ion-item>
      <ion-row>
        <p class="next_preview" (click)="decreaseDate()">
          Previous
        </p>
        <p  class="next_preview"  *ngIf="!(changeDate >=formatCurrentDate)" (click)="increaseDate()">
          Next
        </p>
      </ion-row>

      

      <h4>Morning</h4>
      <ion-item-sliding *ngFor="let list of routineList">
        <ion-item *ngIf="list.period == 'morning'">
          <ion-label style="display: flex; justify-content: space-between">
            <div style="text-transform: capitalize">
              {{list.name}} ({{list.period}})
            </div>

            <input
              type="checkbox"
              name="{{list._id}}"
              [(ngModel)]="list.completed"
            />
          </ion-label>
        </ion-item>
      </ion-item-sliding>
      <div *ngIf="checkList(routineList,'morning')">
        <p class="no_record">No Morning Routines Found</p>
      </div>
      <br />
      <h4>Noon</h4>
      <ion-item-sliding *ngFor="let list of routineList">
        <ion-item *ngIf="list.period == 'noon'">
          <ion-label style="display: flex; justify-content: space-between">
            <div style="text-transform: capitalize">
              {{list.name}} ({{list.period}})
            </div>

            <input
              type="checkbox"
              name="{{list._id}}"
              [(ngModel)]="list.completed"
            />
          </ion-label>
        </ion-item>
      </ion-item-sliding>
      <div *ngIf="checkList(routineList,'noon')">
        <p class="no_record">No Noon Routines Found</p>
      </div>
      <br />
      <h4>Evening</h4>
      <ion-item-sliding *ngFor="let list of routineList">
        <ion-item *ngIf="list.period == 'evening'">
          <ion-label style="display: flex; justify-content: space-between">
            <div style="text-transform: capitalize">
              {{list.name}} ({{list.period}})
            </div>

            <input
              type="checkbox"
              name="{{list._id}}"
              [(ngModel)]="list.completed"
            />
          </ion-label>
        </ion-item>
      </ion-item-sliding>
      <div *ngIf="checkList(routineList,'evening')">
        <p class="no_record">No Evening Routines Found</p>
      </div>

      <br />
      <h4>Night</h4>
      <ion-item-sliding *ngFor="let list of routineList">
        <ion-item *ngIf="list.period == 'night';else elseNight">
          <ion-label style="display: flex; justify-content: space-between">
            <div style="text-transform: capitalize">
              {{list.name}} ({{list.period}})
            </div>

            <input
              type="checkbox"
              name="{{list._id}}"
              [(ngModel)]="list.completed"
            />
          </ion-label>
        </ion-item>
      </ion-item-sliding>
      <div *ngIf="checkList(routineList,'night')">
        <p class="no_record">No Night Routines Found</p>
      </div>
      <br />
    </form>
    <br>
    <br>
    <br>
  </ng-container>
</ion-content>
